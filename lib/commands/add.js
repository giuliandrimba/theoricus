// Generated by CoffeeScript 1.6.2
(function() {
  var Add, Controller, Model, Question, View,
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

  Model = require('../generators/model');

  Controller = require('../generators/controller');

  View = require('../generators/view');

  Question = require('../generators/question');

  module.exports = Add = (function(_super) {
    __extends(Add, _super);

    function Add(the, opts) {
      this.the = the;
      this.opts = opts;
      this.create();
    }

    Add.prototype.create = function() {
      var args, error_msg, f, name, q, type,
        _this = this;

      if (this.opts[1] != null) {
        type = this.opts[1];
      } else {
        q = "Which you would like to create? [controller|model|view|mvc] : ";
        f = /(controller|model|view|mvc)/;
        return this.ask(q, f, function(type) {
          _this.opts[1] = type;
          return _this.create();
        });
      }
      if (this.opts[2] != null) {
        name = this.opts[2];
      } else {
        q = "Please give it a name : ";
        f = /([^\s]*)/;
        return this.ask(q, f, function(name) {
          _this.opts[2] = name;
          return _this.create();
        });
      }
      args = this.opts.slice(3);
      if (this[type] == null) {
        error_msg = "Valid options: controller, model, view, mvc.";
        throw new Error(error_msg);
      }
      return this[type](name, args);
    };

    Add.prototype.mvc = function(name, args) {
      this.model(name.singularize(), args);
      this.view("" + (name.singularize()) + "/index");
      return this.controller(name);
    };

    Add.prototype.model = function(name, args) {
      return new Model(this.the, name, args, this.opts);
    };

    Add.prototype.view = function(path) {
      var error_msg, folder, name, parts;

      folder = (parts = path.split('/'))[0];
      name = parts[1];
      if (name == null) {
        error_msg = "Views should be added with path-style notation.\n\n\ti.e.:\n\t\t theoricus add view person/index\n\t\t theoricus add view user/list\n";
        throw new Error(error_msg);
        return;
      }
      return new View(this.the, name, folder, false, this.opts);
    };

    Add.prototype.controller = function(name) {
      return new Controller(this.the, name, this.opts);
    };

    return Add;

  })(Question);

}).call(this);

/*
//@ sourceMappingURL=add.map
*/
