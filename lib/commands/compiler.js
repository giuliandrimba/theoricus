// Generated by CoffeeScript 1.6.3
(function() {
  var Compiler, fork, path;

  path = require('path');

  fork = (require('child_process')).fork;

  module.exports = Compiler = (function() {
    function Compiler(the, cli, release, webserver) {
      var opt, polvo_path,
        _this = this;
      this.the = the;
      this.cli = cli;
      if (!this.the.is_theoricus_app()) {
        return;
      }
      opt = release != null ? '-r' : '-c';
      polvo_path = path.join(this.the.root, 'node_modules', 'polvo', 'bin', 'polvo');
      this.polvo = fork(polvo_path, [opt], {
        cwd: this.the.app_root
      });
      this.polvo.on('message', function(data) {
        switch (data.channel) {
          case 'stdout':
            return console.log(data.msg);
          case 'stderr':
            return console.error(data.msg);
        }
      });
    }

    return Compiler;

  })();

}).call(this);

/*
//@ sourceMappingURL=compiler.map
*/
